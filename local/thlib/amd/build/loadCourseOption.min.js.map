{"version":3,"sources":["../src/loadCourseOption.js"],"names":["define","$","on_select_change_value","onDocumentReady","length","a","before","show","data","serializeArray","reduce","obj","item","name","value","selector","text","makhoa","malop","time_from_day","time_from_month","time_from_year","time_to_day","time_to_month","time_to_year","userid","makhoaidarr","makhoaarr","each","index","element","push","attr","$select","find","$text","includes","malopidarr","maloparr","useridarr","ajaxx","require","ajax1","loadcourses","then","hide","loadCourseOption","document","ready","el","on","html"],"mappings":"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","sourcesContent":["define(['jquery', 'local_thlib/ajaxcalls'],\n    function($, Ajaxcalls) {\n\n        function on_select_change_value(onDocumentReady = false) {\n\n            if($('.myloader').length == 0)         // use this if you are using id to check\n            {                                    \n                var a = $('#fitem_id_courseidarr');\n                a.before('<div class=\"myloader\"></div>');\n            }\n            else\n            {\n                $('.myloader').show();\n            }\n\n            var data = $('.mform').serializeArray().reduce(function(obj, item) {\n                obj[item.name] = item.value;\n                var selector = \"[name='\" + item.name + \"'] option:selected\";\n                obj[item.name + \"_text\"] = $(selector).text();\n                return obj;\n            }, {});\n\n            var makhoa = data[\"makhoaid_text\"];\n            var malop = data[\"malopid_text\"];\n            var time_from_day = data[\"time_from[day]\"];\n            var time_from_month = data[\"time_from[month]\"];\n            var time_from_year = data[\"time_from[year]\"];\n            var time_to_day = data[\"time_to[day]\"];\n            var time_to_month = data[\"time_to[month]\"];\n            var time_to_year = data[\"time_to[year]\"];\n            var userid = data[\"userid_text\"];\n\n            // var time_from = new Date(time_from_year, time_from_month, time_from_day).getTime() / 1000;\n            // var time_to = new Date(time_to_year, time_to_month, time_to_day).getTime() / 1000;\n            var makhoaidarr = [];\n            var makhoaarr = [];\n            $('#fitem_id_makhoaid .form-autocomplete-selection > span[data-value]').each(function(index, element) {\n                makhoaidarr.push($(element).attr('data-value'));\n            });\n\n            $select = $('#fitem_id_makhoaid select');\n\n            if (onDocumentReady) {\n                $select.find('[selected]').each(function(index, element) {\n                    $text = $(element).text();\n                    makhoaarr.push($text);\n                });\n            }\n\n            $.each(makhoaidarr, function(index, element) {\n                var text = $select.find(`option[value=${element}]`).text();\n                if (!makhoaarr.includes(text)) {\n                    makhoaarr.push(text);\n                }\n            });\n\n\n\n            var malopidarr = [];\n            var maloparr = [];\n            $('#fitem_id_malopid .form-autocomplete-selection > span[data-value]').each(function(index, element) {\n                malopidarr.push($(element).attr('data-value'));\n            });\n\n            if (onDocumentReady) {\n                $select = $('#fitem_id_malopid select');\n                $select.find('[selected]').each(function(index, element) {\n                    $text = $(element).text();\n                    maloparr.push($text);\n                });\n            }\n\n\n            $.each(malopidarr, function(index, element) {\n                var text = $select.find(`option[value=${element}]`).text();\n                if (!malopidarr.includes(text)) {\n                    maloparr.push(text);\n                }\n            });\n\n\n            var useridarr = [];\n            $('#fitem_id_userid .form-autocomplete-selection > span[data-value]').each(function(index, element) {\n                useridarr.push($(element).attr('data-value'));\n            });\n\n            $select = $('#fitem_id_userid select');            \n            if (onDocumentReady) {\n                $select.find('[selected]').each(function(index, element) {\n                    $text = $(element).attr('value');\n                    if (!useridarr.includes($text)) {\n                        useridarr.push($text);\n                    }\n                });\n            }\n\n            // console.log(makhoaarr);\n            // console.log(maloparr);\n            // console.log(useridarr);\n\n            // console.log(data);\n            // console.log(makhoa);\n            // console.log(malop);\n\n            if (!userid || userid == '') userid = 0;\n            var ajaxx = require(\"local_thlib/ajaxcalls\");\n            var ajax1 = new ajaxx();\n            ajax1.loadcourses(makhoaarr, maloparr, useridarr, null, null, onDocumentReady).then(()=>{\n                $('.myloader').hide();\n            }); \n\n        }\n\n        return {\n            loadCourseOption: function() {\n                $(document).ready(function() {\n                    $('select.custom-select ').each(function(index, el) {\n\n                        var el = $(el);\n                        if ($(el).attr(\"id\") == 'id_courseidarr') {\n                            return;\n                        }\n                        $(el).on('change', function() {\n                            $(\"#fitem_id_courseidarr .form-autocomplete-selection\").html('<span class=\"mb-3 mr-1\">No Selection</span>');\n                            on_select_change_value();\n                        });\n                    });\n\n                    $('#fgroup_id_show_option input.form-check-input').on('change', function() {\n                        $(\"#fitem_id_courseidarr .form-autocomplete-selection\").html('<span class=\"mb-3 mr-1\">No Selection</span>');\n                        on_select_change_value();\n                    })\n\n                    on_select_change_value(true);\n                });\n            },\n        };\n    });"],"file":"loadCourseOption.min.js"}