{"version":3,"sources":["../src/loadCourseOption.js"],"names":["define","$","on_select_change_value","onDocumentReady","data","serializeArray","reduce","obj","item","name","value","selector","text","makhoa","malop","time_from_day","time_from_month","time_from_year","time_to_day","time_to_month","time_to_year","userid","makhoaidarr","makhoaarr","each","index","element","push","attr","$select","find","$text","includes","malopidarr","maloparr","useridarr","ajaxx","require","ajax1","loadcourses","loadCourseOption","document","ready","el","on","html"],"mappings":"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","sourcesContent":["define(['jquery', 'local_thlib/ajaxcalls'],\n    function($, Ajaxcalls) {\n\n        function on_select_change_value(onDocumentReady = false) {\n            var data = $('.mform').serializeArray().reduce(function(obj, item) {\n                obj[item.name] = item.value;\n                var selector = \"[name='\" + item.name + \"'] option:selected\";\n                obj[item.name + \"_text\"] = $(selector).text();\n                return obj;\n            }, {});\n\n            var makhoa = data[\"makhoaid_text\"];\n            var malop = data[\"malopid_text\"];\n            var time_from_day = data[\"time_from[day]\"];\n            var time_from_month = data[\"time_from[month]\"];\n            var time_from_year = data[\"time_from[year]\"];\n            var time_to_day = data[\"time_to[day]\"];\n            var time_to_month = data[\"time_to[month]\"];\n            var time_to_year = data[\"time_to[year]\"];\n            var userid = data[\"userid_text\"];\n\n            // var time_from = new Date(time_from_year, time_from_month, time_from_day).getTime() / 1000;\n            // var time_to = new Date(time_to_year, time_to_month, time_to_day).getTime() / 1000;\n            var makhoaidarr = [];\n            var makhoaarr = [];\n            $('#fitem_id_makhoaid .form-autocomplete-selection > span[data-value]').each(function(index, element) {\n                makhoaidarr.push($(element).attr('data-value'));\n            });\n\n            $select = $('#fitem_id_makhoaid select');\n\n            if (onDocumentReady) {\n                $select.find('[selected]').each(function(index, element) {\n                    $text = $(element).text();\n                    makhoaarr.push($text);\n                });\n            }\n\n            $.each(makhoaidarr, function(index, element) {\n                var text = $select.find(`option[value=${element}]`).text();\n                if (!makhoaarr.includes(text)) {\n                    makhoaarr.push(text);\n                }\n            });\n\n\n\n            var malopidarr = [];\n            var maloparr = [];\n            $('#fitem_id_malopid .form-autocomplete-selection > span[data-value]').each(function(index, element) {\n                malopidarr.push($(element).attr('data-value'));\n            });\n\n            if (onDocumentReady) {\n                $select = $('#fitem_id_malopid select');\n                $select.find('[selected]').each(function(index, element) {\n                    $text = $(element).text();\n                    maloparr.push($text);\n                });\n            }\n\n\n            $.each(malopidarr, function(index, element) {\n                var text = $select.find(`option[value=${element}]`).text();\n                if (!malopidarr.includes(text)) {\n                    maloparr.push(text);\n                }\n            });\n\n\n            var useridarr = [];\n            $('#fitem_id_userid .form-autocomplete-selection > span[data-value]').each(function(index, element) {\n                useridarr.push($(element).attr('data-value'));\n            });\n\n            $select = $('#fitem_id_userid select');            \n            if (onDocumentReady) {\n                $select.find('[selected]').each(function(index, element) {\n                    $text = $(element).attr('value');\n                    if (!useridarr.includes($text)) {\n                        useridarr.push($text);\n                    }\n                });\n            }\n\n            // console.log(makhoaarr);\n            // console.log(maloparr);\n            // console.log(useridarr);\n\n            // console.log(data);\n            // console.log(makhoa);\n            // console.log(malop);\n\n\n            if (!userid || userid == '') userid = 0;\n            var ajaxx = require(\"local_thlib/ajaxcalls\");\n            var ajax1 = new ajaxx();\n            ajax1.loadcourses(makhoaarr, maloparr, useridarr, null, null, onDocumentReady);\n        }\n\n        return {\n            loadCourseOption: function() {\n                $(document).ready(function() {\n                    $('select.custom-select ').each(function(index, el) {\n\n                        var el = $(el);\n                        if ($(el).attr(\"id\") == 'id_courseidarr') {\n                            return;\n                        }\n                        $(el).on('change', function() {\n                            $(\"#fitem_id_courseidarr .form-autocomplete-selection\").html('<span class=\"mb-3 mr-1\">No Selection</span>');\n                            on_select_change_value();\n                        });\n                    });\n\n                    $('#fgroup_id_show_option input.form-check-input').on('change', function() {\n                        $(\"#fitem_id_courseidarr .form-autocomplete-selection\").html('<span class=\"mb-3 mr-1\">No Selection</span>');\n                        on_select_change_value();\n                    })\n\n                    on_select_change_value(true);\n                });\n            },\n        };\n    });"],"file":"loadCourseOption.min.js"}