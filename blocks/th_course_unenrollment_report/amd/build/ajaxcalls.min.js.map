{"version":3,"sources":["../src/ajaxcalls.js"],"names":["define","$","notification","ajax","document","ready","on","click_class","attr","replace","date","eq","text","courseid","parent","fullname_course","siblings","length","remove","Ajaxcall","value","prototype","load_users","promises","call","methodname","args","done","console","log","fail","exception","response","lang","documentElement","stt","table","key","key1","after","configure","language","buttons","mcopy","print","DataTable","window","location","href","pathname","ex","ajax1"],"mappings":"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","sourcesContent":["define(['jquery', 'core/notification', 'core/ajax'], function($, notification, ajax) {\n\n$(document).ready(function() {\n    $(\".click\").on('click', function() {\n\n        var click_class = $(this).attr(\"class\");\n        click_class = click_class.replace('click ', '');\n        click_class = click_class.replace(' ', '.');\n\n        var date = $(\"th.\" + click_class).eq(0).text();\n        var courseid = $(this).parent().attr('id');\n\n        var fullname_course = $(this).siblings(\"td.c1\").text();\n        fullname_course = \"<h2 class='fullname'>\" + fullname_course + \"</h2>\";\n\n        if ($(\".fullname\").length) {\n            $(\"table.fullname\").parent().remove();\n            $(\"h2.fullname\").remove();\n        }\n        // else {\n\n        function Ajaxcall() {\n            this.value = \"ajax ok\";\n        }\n\n        Ajaxcall.prototype.load_users = function(courseid, date) {\n\n            var promises = ajax.call([{\n                methodname: 'block_th_course_unenrollment_report_load_users',\n                args: {\n                    courseid: courseid,\n                    date: date\n                },\n                done: console.log(\"ajax done\"),\n                fail: notification.exception\n            }]);\n\n            promises[0].done(function(response) {\n\n                // console.log(response);\n                var lang = document.documentElement.lang;\n                var stt = 1;\n\n                var table = \"<table border='1' id='myTable' class='fullname'>\";\n                table += \"<thead>\";\n                table += \"<tr>\";\n                if (lang == 'vi') {\n                    table += \"<th>STT</th>\";\n                    table += \"<th>Họ và tên</th>\";\n                    table += \"<th>Tên tài khoản</th>\";\n                    table += \"<th>Quyền</th>\";\n                    table += \"<th>Tổ chức</th>\";\n                    table += \"<th>Ngày ghi danh</th>\";\n                    table += \"<th>Ngày kích hoạt</th>\";\n                    table += \"<th>Ngày hết hạn</th>\";\n                    table += \"<th>Trạng thái</th>\";\n                } else {\n                    table += \"<th>No.</th>\";\n                    table += \"<th>Fullname</th>\";\n                    table += \"<th>Username</th>\";\n                    table += \"<th>Role</th>\";\n                    table += \"<th>Institution</th>\";\n                    table += \"<th>Enrolment Date</th>\";\n                    table += \"<th>Enrolment Activation Date</th>\";\n                    table += \"<th>Enrolment Expire Date</th>\";\n                    table += \"<th>Enrolment Status</th>\";\n                }\n\n                table += \"</tr>\";\n                table += \"</thead>\";\n                table += \"<tbody>\";\n\n                for (let key in response) {\n                    table += \"<tr>\";\n                    table += \"<td style='text-align:center;'>\" + stt + \"</td>\";\n\n                    for (let key1 in response[key]) {\n                        if (key1 != 'userid') {\n                            table += \"<td>\" + response[key][key1] + \"</td>\";\n                        }\n                    }\n                    stt++;\n                    table += \"</tr>\";\n                }\n\n                table += \"</tbody>\";\n                table += \"</table>\";\n                $('#DataTables_Table_0_wrapper').after(table);\n\n                var configure = {\n                    \"lengthMenu\": [\n                        [10, 25, 50, -1],\n                        [10, 25, 50, \"All\"]\n                    ],\n                    \"pageLength\": 25,\n                    \"dom\": 'lBfrtip',\n                };\n                if (lang == 'vi') {\n                    configure.language = {\n                        \"url\": \"//cdn.datatables.net/plug-ins/1.10.21/i18n/Vietnamese.json\",\n                        buttons: {\n                            mcopy: \"sao chép\",\n                            print: \"in\",\n                        },\n                        \"decimal\": \",\"\n                    }\n                }\n                // $(\".\" + courseid).DataTable(configure);\n                $(\"#myTable\").DataTable(configure);\n                $('#DataTables_Table_0_wrapper').after(fullname_course);\n\n                var url = window.location.href;\n                window.location = window.location.pathname + \"#myTable\";\n\n            }).fail(function(ex) {\n                console.log(ex);\n            });\n        };\n\n        var ajax1 = new Ajaxcall();\n        ajax1.load_users(courseid, date);\n\n    // }\n    });\n});\n});"],"file":"ajaxcalls.min.js"}